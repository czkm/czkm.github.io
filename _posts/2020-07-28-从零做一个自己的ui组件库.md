---
layout:     post                    # ä½¿ç”¨çš„å¸ƒå±€ï¼ˆä¸éœ€è¦æ”¹ï¼‰
title:      ä»é›¶åšä¸€ä¸ªè‡ªå·±çš„uiç»„ä»¶åº“       # æ ‡é¢˜ 
subtitle:   uiç»„ä»¶åº“        #å‰¯æ ‡é¢˜
date:       2020-07-28              # æ—¶é—´
author:     czk                      # ä½œè€…
header-img: img/my/img7.jpg    #è¿™ç¯‡æ–‡ç« æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡
catalog: true                       # æ˜¯å¦å½’æ¡£
tags:  
#æ ‡ç­¾
    - js
    - å‰ç«¯
---

## å‰è¨€
å¾ˆå¤šæ—¶å€™é¢å¯¹æ—¥å¸¸çš„å·¥ä½œä¸šåŠ¡éœ€æ±‚ï¼Œæˆ–è€…é¢å¯¹æ–°é¡¹ç›®æ—¶å¾€å¾€éƒ½æ˜¯`npm i element-ui -S`å®‰è£…elementæˆ–è€…Antçš„ç»„ä»¶åº“ï¼Œä½†å¦‚æœè‡ªå·±æƒ³è¦é¢å¯¹ç‰¹æ®Šçš„éœ€æ±‚éœ€è¦å®šåˆ¶ç»„ä»¶å¾€å¾€éœ€è¦ä¸æ–­ä¿®æ”¹ï¼Œæ”¹å®Œåˆå¾€å¾€å¿˜è®°äº†æ•´ç†ï¼Œæœ€åå°±æ˜¯ä¸æ–­çš„é‡å¤ã€‚

ä½ æ‰€å†™çš„æ¯ä¸€ä¸ª vue æ–‡ä»¶éƒ½å¯ä»¥è§†ä¸ºä¸€ä¸ªç»„ä»¶ï¼Œéšç€ä¸šåŠ¡çš„ä¸æ–­æ·±å…¥ï¼Œé¡µé¢å†™å¤šäº†æƒ³å°†ç»„ä»¶é›†åˆèµ·æ¥å°è£…æˆä¸€ä¸ªç»„ä»¶åº“çš„æƒ³æ³•ä¹Ÿä¸æ–­åŠ å‰§ã€‚ä»…åœ¨æ­¤å†™ä¸‹ç»„ä»¶åº“çš„æ„å»ºæ€è·¯å’Œå†ç¨‹ï¼Œä¾›è‡ªå·±è®°å¿†å­¦ä¹ ï¼Œä¹Ÿå¸Œæœ›èƒ½å¸®åŠ©åˆ°ä½ ã€‚

## ç›®å½•æ„å»º
- æ¨èä½¿ç”¨@vue/cli è¿›è¡Œé¡¹ç›®çš„æ„å»º`npm install -g @vue/cli`
- å‘½ä»¤è¡Œä¸­è¾“å…¥`vue reate orange_collect`å¿«é€Ÿåˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ã€‚
![](https://user-gold-cdn.xitu.io/2020/7/21/17370740df1777a4?w=518&h=596&f=png&s=43380)

- å°†srcçš„ç›®å½•æ–‡ä»¶æ”¹ä¸ºexamplesï¼Œç”¨æ¥å†™ç»„ä»¶ç›¸å…³æ–‡æ¡£å’Œäº‹ä¾‹ã€‚
- å†æ–°å»ºä¸€ä¸ªsrcç›®å½•ï¼Œé‡Œé¢åªæ”¾ä¸€ä¸ªmain.jsç”¨æ¥ä½œä¸ºæ‰“åŒ…å…¥å£
- åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª packages æ–‡ä»¶å¤¹ï¼Œç”¨æ¥è¿›è¡Œç»„ä»¶çš„ç¼–å†™ã€‚
- åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªvue.config.jsæ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹
    ``` JavaScript
    const NODE_ENV = 'development' // å¼€å‘ç¯å¢ƒ æ‰“åŒ…doc
    // const NODE_ENV = 'lib' // ç»„ä»¶åº“ ä¸Šä¼ npm
    const components = require('./build/compontents.json');
    const path = require('path')
    const baseConfig = {
        chainWebpack: config => {
            config.resolve.alias
            .set('@', path.resolve('examples'))
            .set('~', path.resolve('packages'))
            config.module
                .rule('js')
                .include
                .add('/packages')
                .end()
                .use('babel')
                .loader('babel-loader')
                .tap(options => {
                    // ä¿®æ”¹å®ƒçš„é€‰é¡¹...
                    return options
                })
        },
        //å¦‚æœ‰scssé…ç½®éœ€æ±‚
        // css: {
        //   extract: false,
        //   loaderOptions: {
        //     // ç»™ sass-loader ä¼ é€’é€‰é¡¹
        //     sass: {
        //       data: `@import "public/css/ui.scss";`
        //     }
        //   },
        // }
    }
    const devConfig = {
        pages: {
            index: {
                entry: 'examples/main.js',
                template: 'public/index.html',
                filename: 'index.html',
            }
        },
        publicPath: './',
        outputDir: 'docs',
        ...baseConfig
    }
    const buildConfig = {
        configureWebpack: {
            entry: components,
            output: {
                filename: '[name].js',
                libraryTarget: 'commonjs2',
            },
        },
        outputDir: 'lib',
        productionSourceMap: false,
        ...baseConfig
    }
    
    module.exports = NODE_ENV === 'development' ? devConfig : buildConfig;
    ```
è¿™é‡Œé€šè¿‡åˆ¤æ–­NODE_ENVæ¥åˆ¤æ–­é¡¹ç›®çš„æ‰“åŒ…æ–¹å¼ï¼Œåœ¨developmentä¸‹æŠŠexamples åŠ å…¥ç¼–è¯‘ï¼Œå°†`examples/main.js`è®¾ç½®ä¸ºæ–‡ä»¶å…¥å£ã€‚è®¾ç½®`examples`å’Œ`packages`çš„åˆ«åã€‚

æ­¤æ—¶è¿è¡Œ`npm run serve`å·²å¯ä»¥æ­£å¸¸å¯åŠ¨é¡¹ç›®ã€‚å°†HelloWorldé¡µé¢ç¨ä½œä¿®æ”¹ï¼Œæ·»åŠ æ ·å¼å’Œå¸ƒå±€ã€‚

- åœ¨`router`ä¸­æ·»åŠ é¡µé¢è·¯ç”±
    ```
    import Vue from 'vue'
    import Router from 'vue-router'
    import Home from '../components/HelloWorld.vue'
    
    //ç»„ä»¶
    import component from './component'
    
    Vue.use(Router)
    
    export default new Router({
      routes: [
        {
          path: '/',
          name: 'home',
          component: Home,
          redirect: '/component/installation',
          children: [
            //ç»„ä»¶
            ...component,
          ]
        },
      ]
    })
    ```
    ![](https://user-gold-cdn.xitu.io/2020/7/24/1737f87406f94045?w=2606&h=1204&f=png&s=156933)
ç›¸å…³ç•Œé¢å¦‚ä¸Šï¼Œéœ€è¦æ ·å¼å’Œå¸ƒå±€ä»£ç å¯ä»¥å»æˆ‘çš„[github](https://github.com/czkm/Orange-Collect)ä¸ŠæŸ¥çœ‹ï¼Œå†æ¬¡ä¸åœ¨èµ˜è¿°ã€‚

## ç»„ä»¶ç¼–å†™

### å¸¸è§„ç»„ä»¶ç¼–å†™

- æˆ‘ä»¬ç»„ä»¶çš„ç¼–å†™éƒ½åœ¨packagesæ–‡ä»¶å¤¹ä¸­è¿›è¡Œï¼Œä¸¾ä¸ªğŸŒ°(ä¾‹å­)ï¼Œç°ç¼–å†™ä¸€ä¸ªæµ‹è¯•çš„buttonç»„ä»¶ã€‚
    ```
    â”œâ”€packages                        
    â”‚  â””â”€orange_btn                      #ç»„ä»¶æ¨¡å—åç§°æ–‡ä»¶å¤¹
    â”‚     â”œâ”€src 
    â”‚     |  â”œâ”€orange_btn.vue                 
    â”‚     â””â”€index                        
    â”œâ”€index.js
    ```
- æ–°å»ºä¸€ä¸ªå¦‚ä¸Šçš„ç›®å½•ç»“æ„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦åœ¨`orange_btn.vue`ä¸­ç¼–å†™ç›¸å…³çš„ä¸šåŠ¡ä»£ç ã€‚é€šè¿‡propsæ¥å®šä¹‰ç»„ä»¶çš„ç›¸å…³ç»„ä»¶å’ŒçŠ¶æ€æ‰©å±•ã€‚
     ```
    export default {
        props: {
        type: {
          type: String,
          default: "default"
        },
        size: String,
        icon: {
          type: String,
          default: ""
        }
      },
      name: "orange-button",
      data() {
        return {};
      },
     ```
 - å€¼å¾—æ³¨æ„çš„æ˜¯åœ¨orange_btn.vueä¸­ `name`å±æ€§å°¤ä¸ºé‡è¦å®ƒæ˜¯å¿…é¡»è¦å†™çš„ï¼Œæ˜¯åˆ¤æ–­æ˜¯å¦å”¯ä¸€ç»„ä»¶çš„æ ‡è¯†ï¼Œæ‰€ä»¥ä½ å†™çš„åº”è¯¥æ˜¯ä¸é‡åçš„ã€‚ä¹‹å`name`å°†ç”¨æ¥åˆ¤å®šç»„ä»¶ï¼Œå¦‚è¿™é‡Œçš„`name`æ˜¯`orange-button`åœ¨ä¹‹åå®Œ
 æˆç»„ä»¶çš„æ³¨å†Œå¹¶ä¸”æœ€ç»ˆä½¿ç”¨çš„æ—¶å€™åˆ™æ˜¯`<orange-button></orange-button>`

### ç»„ä»¶å›¾æ ‡çš„å¼•å…¥å’Œä½¿ç”¨
- å»ºè®®ä½¿ç”¨[iconfontçŸ¢é‡å›¾åº“](https://www.iconfont.cn/collections/index?type=1)å°†uiçš„å›¾æ ‡ä¸Šä¼ ï¼Œæˆ–åœ¨å›¾æ ‡åº“ä¸­å¯»æ‰¾åˆé€‚çš„å›¾æ ‡åï¼Œä¸‹è½½è‡³æœ¬åœ°ã€‚
- å°†å›¾ä¸­çš„å­—ä½“æ–‡ä»¶å¤¹å¼•å…¥é¡¹ç›®
![](https://user-gold-cdn.xitu.io/2020/7/24/1737fc28a44cca33?w=422&h=272&f=png&s=19286)
- åœ¨packagesæ–‡ä»¶å¤¹çš„`index.js`å’Œexamplesçš„`main.js`ä¸­å¯¹å­—ä½“æ–‡ä»¶è¿›è¡Œå¼•å…¥`import './assets/font/iconfont.css'`
- ä½¿ç”¨`iconfont`+ç±»å`<i class="iconfont xxxx"/>`

## ç»„ä»¶æš´éœ²
- æ¯ä¸€ä¸ªç»„ä»¶éƒ½éœ€è¦å¦‚æ­¤æ­¥éª¤ï¼Œå…ˆå»ºç«‹ç»„ä»¶åŒåçš„æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨`orange_btn`æ–‡ä»¶å¤¹ä¸‹çš„`indexÂ·js`ä¸‹ç¼–å†™æš´éœ²ä»£ç ï¼Œç”¨äºå®‰è£…å•ä¸ªç»„ä»¶
    ```
    import BlackBtn from './src/orange_btn.vue'
    
    // ä¸ºç»„ä»¶æä¾› install å®‰è£…æ–¹æ³•ï¼Œä¾›æŒ‰éœ€å¼•å…¥
    BlackBtn.install = function (Vue) {
      Vue.component(BlackBtn.name, BlackBtn)
    }

    // é»˜è®¤å¯¼å‡ºç»„ä»¶
    export default BlackBtn
    ```

- åœ¨packagesæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª`index.js`ç”¨æ¥ç®¡ç†,å¯ä»¥é¿å…æˆ‘ä»¬çš„ç»„ä»¶è¶Šæ¥è¶Šå¤šï¼Œéœ€è¦é‡å¤å¼•å…¥ï¼Œå¾ªç¯å®‰è£…æ‰€æœ‰ç»„ä»¶ã€‚
   ```
    import orange_btn from './orange_btn'
    // å­˜å‚¨ç»„ä»¶åˆ—è¡¨
    const components = [
      orange_btn
    ]
    // å®šä¹‰ install æ–¹æ³•ï¼Œæ¥æ”¶ Vue ä½œä¸ºå‚æ•°ã€‚å¦‚æœä½¿ç”¨ use æ³¨å†Œæ’ä»¶ï¼Œåˆ™æ‰€æœ‰çš„ç»„ä»¶éƒ½å°†è¢«æ³¨å†Œ
    const install = function (Vue) {
      // åˆ¤æ–­æ˜¯å¦å®‰è£…
      if (install.installed) return
      // éå†æ³¨å†Œå…¨å±€ç»„ä»¶
      components.map(component => Vue.component(component.name, component))
    }
    
    // åˆ¤æ–­æ˜¯å¦æ˜¯ç›´æ¥å¼•å…¥æ–‡ä»¶
    if (typeof window !== 'undefined' && window.Vue) {
      install(window.Vue)
    }
    
    export default {
      // å¯¼å‡ºçš„å¯¹è±¡å¿…é¡»å…·æœ‰ installï¼Œæ‰èƒ½è¢« Vue.use() æ–¹æ³•å®‰è£…
      install,
      // ä»¥ä¸‹æ˜¯å…·ä½“çš„ç»„ä»¶åˆ—è¡¨
      orange_btn
    }
    ``` 
## ç»„ä»¶å¼•å…¥
- åœ¨examplesç”¨æ¥å†™ç»„ä»¶ç›¸å…³æ–‡æ¡£å’Œäº‹ä¾‹ã€‚åœ¨examplesçš„`main.js`ä¸­å¼•å…¥
![](https://user-gold-cdn.xitu.io/2020/7/24/1737fb305cc2d06d?w=1390&h=810&f=png&s=149761)

- ä½¿ç”¨`<orange-button></orange-button>`å·²å¯ä»¥åœ¨é¡µé¢ä¸­ä½¿ç”¨ï¼Œç”±æ­¤å¯ä»¥ç¼–å†™ç›¸å…³çš„æ–‡æ¡£è¯´æ˜ã€‚
  ![](https://user-gold-cdn.xitu.io/2020/7/22/17374a319f90d57c?w=882&h=304&f=gif&s=144377)

## æ‰“åŒ…é…ç½®
- åœ¨é¡¹ç›®ç»„ä»¶ç¼–å†™è¿‡åï¼Œå°±å¯ä»¥å°†ç»„ä»¶æ‰“åŒ…ğŸ“¦ä¸Šä¼ è‡³npmä½¿ç”¨
- å°†`vue.config.js`ä¸‹çš„NODE_ENVæ”¹ä¸ºlibæ¨¡å¼
- æ–°å»ºbuildæ–‡ä»¶å¤¹ï¼Œå†™ä¸€ä¸ªæ–¹æ³•
    ```
    const fs = require('fs-extra');
    const path = require('path');
    
    function isDir(dir) {
        return fs.lstatSync(dir).isDirectory();
    }
    
    function transformStr3(str) {
        var re = /-(\w)/g;
        return str.replace(re, function ($0, $1) {
            return $1.toUpperCase();
        });
    }
    
    // function firstUpperCase(str) {
    //     return str.toLowerCase().replace(/( |^)[a-z]/g, (L) => L.toUpperCase());
    // }
    
    const json = {};
    const dir = path.join(__dirname, '../packages');
    const files = fs.readdirSync(dir);
    files.forEach(file => {
        const absolutePath = path.join(dir, file);
        if (isDir(absolutePath)) {
            let fileKey = transformStr3(file.replace('orange_', ''))
            // console.log(fileKey)
            json[fileKey] = `/Users/chenzhikun/project/GitHub/orange_ui/packages/${file}/index.js`; //mac
            // json[fileKey] = `D:/projects/orange_ui/packages/${file}/index.js`;  //windows
        }
    });
    ```
- é€šè¿‡è¿è¡Œæ–¹æ³•ï¼Œè·å¾—ç»„ä»¶çš„è·¯å¾„ä¹‹ååœ¨`vue.config.js`ä¸­å¼•å…¥`const components = require('./build/compontents.json')`
- è¿è¡Œ`npm run build`å¯ä»¥å¾—åˆ°ä¸€ä¸ªlibæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦ä¸Šä¼ åˆ°npmçš„æ–‡ä»¶ã€‚æ­¤æ—¶æ–‡ä»¶ç›®å½•å¦‚ä¸‹ã€‚

![](https://user-gold-cdn.xitu.io/2020/7/24/1738023e48e0ee41?w=406&h=752&f=png&s=50323)

## npmå‘å¸ƒ
- npmå‘å¸ƒæ—¶ï¼Œè¦å°†package.jsonä¸­çš„privateå±æ€§å€¼æ”¹ä¸ºfalseå¹¶ä¿®æ”¹é¡¹ç›®çš„ç‰ˆæœ¬å·
 ![](https://user-gold-cdn.xitu.io/2020/7/24/173800e2f05fc51b?w=898&h=242&f=png&s=36162)
- æˆ‘ä»¬æ²¡æœ‰å¿…è¦æŠŠæ‰€æœ‰çš„ä»£ç éƒ½å‘å¸ƒåˆ°npmä¸Šã€‚åœ¨é¡¹ç›®çš„æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª.npmignoreçš„æ–‡ä»¶ï¼Œå¯¹å¤šä½™çš„æ–‡ä»¶è¿›è¡Œå¿½ç•¥.
    ```
    .DS_Store
    node_modules
    /dist
    
    # local env files
    .env.local
    .env.*.local
    
    # Log files
    npm-debug.log*
    yarn-debug.log*
    yarn-error.log*
    
    # Editor directories and files
    .idea
    .vscode
    *.suo
    *.ntvs*
    *.njsproj
    *.sln
    *.sw*
    
    # ä»¥ä¸‹æ˜¯æ–°å¢çš„
    # è¦å¿½ç•¥ç›®å½•å’ŒæŒ‡å®šæ–‡ä»¶
    build/
    examples/
    packages/
    public/
    src/
    util/
    vue.config.js
    babel.config.js
    *.map
    *.html
    ```
- æ‰§è¡Œ`npm who am i`å‘½ä»¤, å¦‚æœæ²¡æœ‰ç™»é™†åˆ™æ‰§è¡Œ`npm login`å‘½ä»¤ï¼Œç³»ç»Ÿä¼šæç¤ºè¾“å…¥è´¦æˆ·å’Œå¯†ç ã€‚å¦‚æœæ²¡æœ‰åˆ™éœ€è¦å‰å¾€[npmå®˜ç½‘](https://www.npmjs.com/)è¿›è¡Œæ³¨å†Œã€‚
- ç™»é™†ä¹‹åæ‰§è¡Œ `npm publish` è¿›è¡Œç‰ˆæœ¬å‘å¸ƒã€‚
- åœ¨npmå‘å¸ƒå®Œæˆä¹‹åå°±å¯ä»¥åœ¨ä»»æ„ä¸€é¡¹ç›®ä¸­ä½¿ç”¨`npm i orange_collect`æ¥å®‰è£…é¡¹ç›®ï¼Œä¹‹ååœ¨`main.js`ä¸­å¼•å…¥
    ```
    import orange from 'orange_collect'
    import 'orange_collect/lib/orange_collect.css'
    
    Vue.use(orange)
    ```
æ­¤æ—¶çš„ç»„ä»¶å‡èƒ½é€šè¿‡æ ‡ç­¾æ­£å¸¸çš„ä½¿ç”¨ã€‚    
![](https://user-gold-cdn.xitu.io/2020/7/21/1736f79b16127d81?w=574&h=468&f=gif&s=330704)
## å°ç»“
ä»é›¶æ–°å»ºä¸€ä¸ªè‡ªå·±çš„ç»„ä»¶åº“è‡³æ­¤å°±å·²ç»å®Œæˆäº†ï¼Œå¦‚æœæƒ³æˆ‘ä¸€æ ·å›¢é˜Ÿä¸­æœ‰éœ€è¦å°è£…è‡ªå·±çš„ç»„ä»¶ä»£ç åº“ï¼Œåˆ™å¯ä»¥è¯•ç€åƒæˆ‘ä¸€æ ·å†™ä¸€ä¸ªè½®å­ä¸€èµ·ç”¨ï¼Œæˆ‘åˆ™æ˜¯æƒ³æ”¶é›†å„ç±»æœ‰æ„æ€çš„æŒ‰é’®è¿›è¡Œè‡ªå·±çš„å°è£…ã€‚
[githubåœ°å€](https://github.com/czkm/Orange-Collect)
